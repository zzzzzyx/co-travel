<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>Title</title>
    <link href="css/mui.min.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
</head>
<body>
<header class="mui-bar mui-bar-nav">
    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left" style="touch-action: none;"></a>
    <h1 class="mui-title">活动</h1>
</header>
<div class="mui-content">
    <form id="choose-activity-type" class="mui-input-group">
        <div class="mui-input-row">
            <label>Select activity type:</label>
            <select class="mui-select" id="select-type">
                <option value="all">All</option>
                <option value="scenic_spot">Scenic Spot</option>
                <option value="museum">Museum</option>
                <option value="house_party">House Party</option>
                <option value="mountaineering">Mountaineering</option>
                <option value="picnic">Picnic</option>
                <option value="tabletop_game">Tabletop Game</option>
                <option value="others">Others</option>
            </select>
        </div>
    </form>
    <div class="mui-content-padded">
        <div class = "mui-card" style="background-color: #007aff">
            <div class="mui-card-header" >
                <p>activity name</p>
                <p>activity time</p>
            </div>
            <div class="mui-card-content">activity description</div>
            <div class="mui-card-footer">
                activity ddl
            </div>
        </div>
        <div class = "mui-card" style="background-color: #007aff">
            <div class="mui-card-header">
                <p>activity name</p>
                <p>activity time</p>
            </div>
            <div class="mui-card-content">activity description</div>
            <div class="mui-card-footer">
                activity ddl
            </div>
        </div>
    </div>

</div>
</body>
<script src="js/mui.min.js"></script>
<script src="js/mui.enterfocus.js"></script>
<script src="js/app.js"></script>
<script>
        (function($, doc) {
			function getActivityListByCategory(thecategory){
				$.ajax('http://192.168.31.49:8080'+'/activity/findAllByCategory',{
				    data:{
				      category:thecategory
				    },
				    dataType:'json',
				    type:'post',
				    timeout:5000,
				    success:function (response) {
				        var str = JSON.stringify(response);
				        console.log(str);
				    },
				    error:function(xhr,type,errorThrown){
				        console.log(xhr.status);
				        if(xhr.status==0){
				            alert("网络错误");
				        }
				        else if(xhr.status==500){
				            alert("错误的userId或activityId");
				        }
				        else{
				            alert("未知错误");
				        }
				    }
				})
			}
			
        	$.init();
        	$.plusReady(function() {
				select = doc.getElementById("select-type")
				select.addEventListener('change',function(e){
				    getActivityListByCategory(select.value);
					/*user_id = 1001
					activity_id = 1001
					$.ajax('http://192.168.31.49:8080/'+'participate/addParticipate',{
						data:{
							userId: user_id,
							activityId: activity_id
						},
						dataType:'json',//服务器返回json格式数据
						type:'post',//HTTP请求类型
						timeout:5000,//超时时间设置为5秒；
						success:function(response){
							console.log("hahhhh")
							participate_activity.style.display="none";
							exit_activity.style.display="block";
							exit_activity.addEventListener('tap', function(event) {
								alert("退出活动按钮（功能未实现）");
							},false);
							alert("参加活动成功!");
						},
						error:function(xhr,type,errorThrown){
							console.log(xhr.status);
							if(xhr.status==0){
								alert("网络错误");
							}
							else if(xhr.status==500){
								alert("错误的userId或activityId");
							}
							else{
								alert("未知错误");
							}
						},
					});*/
				},false)
        		
        	});
        }(mui, document));
</script>
</html>