<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>Title</title>
    <link href="css/mui.min.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
</head>
<body>
<header class="mui-bar mui-bar-nav">
    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left" style="touch-action: none;"></a>
    <h1 class="mui-title">活动</h1>
</header>
<div class="mui-content">
    <form id="choose-activity-type" class="mui-input-group">
        <div class="mui-input-row">
            <label>Select activity type:</label>
            <select class="mui-select" id="select-type">
                <option value="all">All</option>
                <option value="scenic_spot">Scenic Spot</option>
                <option value="museum">Museum</option>
                <option value="house_party">House Party</option>
                <option value="mountaineering">Mountaineering</option>
                <option value="picnic">Picnic</option>
                <option value="tabletop_game">Tabletop Game</option>
                <option value="others">Others</option>
            </select>
        </div>
    </form>
    <div class="mui-content-padded">
        <div class = "mui-card" style="background-color: #007aff">
            <div class="mui-card-header" >
                <p>activity name</p>
                <p>activity time</p>
            </div>
            <div class="mui-card-content">activity description</div>
            <div class="mui-card-footer">
                activity ddl
            </div>
        </div>
        <div class = "mui-card" style="background-color: #007aff">
            <div class="mui-card-header">
                <p>activity name</p>
                <p>activity time</p>
            </div>
            <div class="mui-card-content">activity description</div>
            <div class="mui-card-footer">
                activity ddl
            </div>
        </div>
    </div>

</div>
</body>
<script src="js/mui.min.js"></script>
<script src="js/mui.enterfocus.js"></script>
<script src="js/app.js"></script>
<script>
    (function($, doc) {
        function getActivityListByCategory(category){
            $.ajax({
                headers:{
                  'category':category
                },
                dataType:'json',
                contentType:'json',
                url:server_url+'/activity/findAllByCategory',
                type:'POST',
                timeout:5000,
                success:function (response) {
                    var str = JSON.stringify(response);
                    console.log(str);
                },
                error:function(xhr,type,errorThrown){
                    console.log(xhr.status);
                    if(xhr.status==0){
                        alert("网络错误");
                    }
                    else if(xhr.status==500){
                        alert("错误的userId或activityId");
                    }
                    else{
                        alert("未知错误");
                    }
                }
            })
        }

        $.init();
        //server_url="http://192.168.69.57:8080";
        server_url="http://localhost:8080";
        select = doc.getElementById("select-type")
        select.addEventListener('change',function(e){
            console.log(select.value)
            getActivityListByCategory(select.value);
        })

        $.plusReady(function() {

            // 测试用的user_id
            user_id=1003;


        });
    }(mui, document));
</script>
</html>